# docker-compose.override.yml
# ============================
# Override configuration for development
# Automatically loaded by docker-compose in development

version: '3.8'

services:
  # Override para desarrollo local
  scan-agent-web:
    # Montar código fuente para hot reload
    volumes:
      - ../src:/scan-agent/src:rw
      - ../webapp:/scan-agent/webapp:rw
      - ../config:/scan-agent/config:rw
      - ../outputs:/scan-agent/outputs:rw
      - ../reports:/scan-agent/reports:rw
      - ../data:/scan-agent/data:rw
      - ../logs:/scan-agent/logs:rw
    
    # Variables de desarrollo
    environment:
      - DEVELOPMENT=true
      - LOG_LEVEL=DEBUG
      - RELOAD=true
      - CORS_ORIGINS=*
    
    # Puerto adicional para debugging
    ports:
      - "8080:8080"
      - "8000:8000"
      - "5678:5678"  # Debug port
    
    # Comando con hot reload
    command: ["--web", "--host", "0.0.0.0", "--port", "8080", "--reload"]

  scan-agent-cli:
    # Montar código fuente
    volumes:
      - ../src:/scan-agent/src:rw
      - ../webapp:/scan-agent/webapp:rw
      - ../config:/scan-agent/config:rw
      - ../outputs:/scan-agent/outputs:rw
      - ../reports:/scan-agent/reports:rw
      - ../data:/scan-agent/data:rw
      - ../logs:/scan-agent/logs:rw
    
    environment:
      - DEVELOPMENT=true
      - LOG_LEVEL=DEBUG